var WPUltimatePostGrid=WPUltimatePostGrid||{};WPUltimatePostGrid.grids={},WPUltimatePostGrid.initGrid=function(t){var i=t.data("grid"),e={itemSelector:".wpupg-item",transitionDuration:wpupg_public.animationSpeed,hiddenStyle:{opacity:0},visibleStyle:{opacity:1}};wpupg_public.rtl&&(e.isOriginLeft=!1);var r=t.data("layout-mode");r&&(e.layoutMode=r),"masonry"==r&&t.data("centered")&&(e.masonry={isFitWidth:!0}),t.isotope(e),t.imagesLoaded(function(){t.isotope("layout")}),WPUltimatePostGrid.grids[i]={container:t,centered:t.data("centered"),data:window["wpupg_grid_"+t.data("grid-id")],id:t.data("grid-id"),pages:[0],page:0,filters:{}},WPUltimatePostGrid.checkLinks(i),WPUltimatePostGrid.updatePosts(i),jQuery(t).on("hover",".wpupg-item",function(t){var i="mouseenter"==t.type;WPUltimatePostGrid.hoverGridItem(jQuery(this),i)})},WPUltimatePostGrid.hoverGridItem=function(t,i){i?(t.addClass("wpupg-hovering"),t.find(".wpupg-show-on-hover").each(function(){var t=jQuery(this),i=t.data("hover-in"),e=parseInt(t.data("hover-in-duration"));"fade"==i?t.fadeIn(e):"slide"==i?t.slideDown(e):t.show()}),t.find(".wpupg-hide-on-hover").each(function(){var t=jQuery(this),i=t.data("hover-out"),e=parseInt(t.data("hover-out-duration"));"fade"==i?t.fadeOut(e):"slide"==i?t.slideUp(e):t.hide()})):(t.removeClass("wpupg-hovering"),t.find(".wpupg-show-on-hover").each(function(){var t=jQuery(this),i=t.data("hover-out"),e=parseInt(t.data("hover-out-duration"));"fade"==i?t.fadeOut(e):"slide"==i?t.slideUp(e):t.hide()}),t.find(".wpupg-hide-on-hover").each(function(){var t=jQuery(this),i=t.data("hover-in"),e=parseInt(t.data("hover-in-duration"));"fade"==i?t.fadeIn(e):"slide"==i?t.slideDown(e):t.show()}))},WPUltimatePostGrid.updatePosts=function(t){var i=[];WPUltimatePostGrid.grids[t].container.find(".wpupg-item").each(function(){var t=jQuery(this).data("id");i.push(t)}),WPUltimatePostGrid.grids[t].posts=i},WPUltimatePostGrid.filterGrid=function(t){var i=WPUltimatePostGrid.grids[t],e=[];if("pages"==i.pagination_type){l=i.page||0;e.push([".wpupg-page-"+l])}for(var r in i.filters)if(i.filters.hasOwnProperty(r)){var a=i.filters[r],o=[],s="",d="";if(a)for(var n=0;n<a.length;n++)d=".wpupg-tax-"+r+"-"+a[n],"match_one"==i.multiselect_type?o.push(d):s+=d;"match_one"==i.multiselect_type?o.length>0&&e.push(o):""!==s&&e.push([s])}if(i.filter="",WPUltimatePostGrid.getFilterString(t,"",e,0),i.inverse)if("pages"==i.pagination_type){var l=i.page||0,c=i.filter.replace(".wpupg-page-"+l,"");i.filter=".wpupg-page-"+l+":not("+c+")"}else i.filter=":not("+i.filter+")";i.container.isotope({filter:i.filter}),i.container.trigger("wpupgFiltered"),WPUltimatePostGrid.updateDeeplink()},WPUltimatePostGrid.getFilterString=function(t,i,e,r){if(r==e.length)""!==WPUltimatePostGrid.grids[t].filter&&(i=", "+i),WPUltimatePostGrid.grids[t].filter+=i;else for(var a=0;a<e[r].length;a++)WPUltimatePostGrid.getFilterString(t,i+e[r][a],e,r+1)},WPUltimatePostGrid.updateDeeplink=function(){var t="";for(var i in WPUltimatePostGrid.grids)if(WPUltimatePostGrid.grids.hasOwnProperty(i)){var e=WPUltimatePostGrid.grids[i],r="";0!=e.page&&(r+="|p:"+(e.page+1));for(var a in e.filters)if(e.filters.hasOwnProperty(a)){var o=e.filters[a];o.length>0&&(r+="|"+a+":"+o.join(","))}""!=r&&(""!=t&&(t+="#"),t+=i,t+=r)}""==t&&(t="*"),document.location.hash=t},WPUltimatePostGrid.restoreDeeplink=function(){var t=document.location.hash;if((t=t.substr(1))&&"*"!=t)for(var i=(t=(t=(t=(t=t.replace("%23","#")).replace("%7C","|")).replace("%3A",":")).replace("%2C",",")).split("#"),e=0;e<i.length;e++)for(var r=i[e].split("|"),a=r[0],o=1;o<r.length;o++){var s=r[o].split(":");if("p"==s[0]){var d=parseInt(s[1])-1;WPUltimatePostGrid.updatePagination(jQuery("#wpupg-grid-"+a+"-pagination"),d)}else{var n=s[1].split(",");WPUltimatePostGrid.updateFilter(jQuery("#wpupg-grid-"+a+"-filter"),s[0],n)}}},WPUltimatePostGrid.checkLinks=function(t){var i=WPUltimatePostGrid.grids[t],e=i.container.data("link-type"),r=i.container.data("link-target");"none"!=e&&i.container.find(".wpupg-item").each(function(){var t=jQuery(this);t.find("a:not(.wpupg-keep-link, .wpurp-recipe-favorite, .wpurp-recipe-add-to-shopping-list, .wpurp-recipe-add-to-meal-plan, .wpurp-recipe-print-button, .wpurp-recipe-grid-link)").each(function(){var t=jQuery(this);0==t.parents(".sharrre").length&&t.replaceWith(function(){return t.contents()})});var i=t.data("custom-link")?t.data("custom-link"):"post"==r?t.data("permalink"):t.data("image"),a="post"==r?"":' rel="lightbox"';i&&0==t.parent("a").length&&t.wrap('<a href="'+i+'" target="'+e+'"'+a+"></a>")})},WPUltimatePostGrid.updateFilter=function(t,i,e){var r=t.data("type"),a="updateFilter"+r.charAt(0).toUpperCase()+r.slice(1);"function"==typeof WPUltimatePostGrid[a]&&WPUltimatePostGrid[a](t,i,e)},WPUltimatePostGrid.updateFilterIsotope=function(t,i,e){for(var r=0;r<e.length;r++)t.find(".wpupg-filter-tag-"+e[r]).click()},WPUltimatePostGrid.initFilterIsotope=function(t){var i=t.data("grid");WPUltimatePostGrid.grids[i].multiselect=t.data("multiselect"),WPUltimatePostGrid.grids[i].multiselect_type=t.data("multiselect-type"),WPUltimatePostGrid.grids[i].inverse=t.data("inverse"),t.find(".wpupg-filter-isotope-term").click(function(){var t=jQuery(this),e=t.data("taxonomy"),r=void 0==t.data("filter"),a=t.data("filter"),o=[];if(WPUltimatePostGrid.grids[i].multiselect&&!r){t.siblings(".wpupg-filter-tag-").removeClass("active").trigger("checkActiveFilter"),void 0==(o=WPUltimatePostGrid.grids[i].filters||[])[e]&&(o[e]=[]);var s=o[e].indexOf(a);if(-1==s)t.addClass("active").trigger("checkActiveFilter"),o[e].push(a);else{t.removeClass("active").trigger("checkActiveFilter"),o[e].splice(s,1);var d=0;for(var n in o)if(o.hasOwnProperty(n)){var l=o[n];l&&(d+=l.length)}0==d&&t.siblings(".wpupg-filter-tag-").addClass("active").trigger("checkActiveFilter")}}else t.siblings(".wpupg-filter-isotope-term").removeClass("active").trigger("checkActiveFilter"),t.addClass("active").trigger("checkActiveFilter"),r||(o[e]=[a]);WPUltimatePostGrid.grids[i].filters=o,WPUltimatePostGrid.filterGrid(i)});var e=t.data("filter-type"),r=t.find(".wpupg-filter-item");if("isotope"==e){var a=t.data("margin-vertical")+"px "+t.data("margin-horizontal")+"px",o=t.data("padding-vertical")+"px "+t.data("padding-horizontal")+"px",s=t.data("border-width")+"px solid "+t.data("border-color"),d=t.data("background-color"),n=t.data("text-color"),l=t.data("border-width")+"px solid "+t.data("active-border-color"),c=t.data("active-background-color"),p=t.data("active-text-color"),g=t.data("border-width")+"px solid "+t.data("hover-border-color"),u=t.data("hover-background-color"),P=t.data("hover-text-color");r.each(function(){var t=jQuery(this);t.css("margin",a).css("padding",o).css("border",s).css("background-color",d).css("color",n).hover(function(){t.hasClass("active")||t.css("border",g).css("background-color",u).css("color",P)},function(){t.hasClass("active")||t.css("border",s).css("background-color",d).css("color",n)}).on("checkActiveFilter",function(){t.hasClass("active")?t.css("border",l).css("background-color",c).css("color",p):t.css("border",s).css("background-color",d).css("color",n)}).trigger("checkActiveFilter")})}},WPUltimatePostGrid.updatePagination=function(t,i){var e=t.data("type");if(e){var r="updatePagination"+e.charAt(0).toUpperCase()+e.slice(1);"function"==typeof WPUltimatePostGrid[r]&&WPUltimatePostGrid[r](t,i)}},WPUltimatePostGrid.updatePaginationPages=function(t,i){t.find(".wpupg-page-"+i).click()},WPUltimatePostGrid.initPaginationPages=function(t){var i=t.data("grid");t.find(".wpupg-pagination-term").click(function(){var t=jQuery(this);t.siblings(".wpupg-pagination-term").removeClass("active").trigger("checkActiveFilter");var e=parseInt(t.addClass("active").trigger("checkActiveFilter").data("page"));if(WPUltimatePostGrid.scrollTo(WPUltimatePostGrid.grids[i].container),-1!==WPUltimatePostGrid.grids[i].pages.indexOf(e))WPUltimatePostGrid.grids[i].page=e,WPUltimatePostGrid.filterGrid(i);else{var r={action:"wpupg_get_page",security:wpupg_public.nonce,grid:i,page:e};t.addClass("wpupg-spinner"),t.css("color",WPUltimatePostGrid.grids[i].pagination_style.active_background_color),jQuery.post(wpupg_public.ajax_url,r,function(r){var a=jQuery(r).toArray();WPUltimatePostGrid.grids[i].container.isotope("insert",a),WPUltimatePostGrid.grids[i].page=e,WPUltimatePostGrid.filterGrid(i),WPUltimatePostGrid.checkLinks(i),WPUltimatePostGrid.grids[i].container.imagesLoaded(function(){WPUltimatePostGrid.grids[i].container.isotope("layout")}),t.removeClass("wpupg-spinner"),t.css("color",WPUltimatePostGrid.grids[i].pagination_style.active_text_color),WPUltimatePostGrid.grids[i].pages.push(e),WPUltimatePostGrid.updatePosts(i)})}});var e=t.find(".wpupg-pagination-term"),r=t.data("margin-vertical")+"px "+t.data("margin-horizontal")+"px",a=t.data("padding-vertical")+"px "+t.data("padding-horizontal")+"px",o=t.data("border-width")+"px solid "+t.data("border-color"),s=t.data("background-color"),d=t.data("text-color"),n=t.data("border-width")+"px solid "+t.data("active-border-color"),l=t.data("active-background-color"),c=t.data("active-text-color"),p=t.data("border-width")+"px solid "+t.data("hover-border-color"),g=t.data("hover-background-color"),u=t.data("hover-text-color");WPUltimatePostGrid.grids[i].pagination_style={margin:r,padding:a,border:o,background_color:s,text_color:d,active_border:n,active_background_color:l,active_text_color:c,hover_border:p,hover_background_color:g,hover_text_color:u},e.each(function(){var t=jQuery(this);t.css("margin",r).css("padding",a).css("border",o).css("background-color",s).css("color",d).hover(function(){t.hasClass("active")||t.css("border",p).css("background-color",g).css("color",u)},function(){t.hasClass("active")||t.css("border",o).css("background-color",s).css("color",d)}).on("checkActiveFilter",function(){t.hasClass("active")?t.css("border",n).css("background-color",l).css("color",c):t.css("border",o).css("background-color",s).css("color",d)}).trigger("checkActiveFilter")})},WPUltimatePostGrid.scrollTo=function(t){var i=t.offset().top-50;i=i<0?0:i,jQuery("html,body").animate({scrollTop:i},500)},jQuery(document).ready(function(t){t(".wpupg-grid").each(function(){WPUltimatePostGrid.initGrid(t(this))}),t(".wpupg-filter").each(function(){var i=t(this),e=i.data("grid"),r=i.data("type");WPUltimatePostGrid.grids[e].filter_type=r;var a="initFilter"+r.charAt(0).toUpperCase()+r.slice(1);"function"==typeof WPUltimatePostGrid[a]&&WPUltimatePostGrid[a](i)}),t(".wpupg-pagination").each(function(){var i=t(this),e=i.data("grid"),r=i.data("type");WPUltimatePostGrid.grids[e].pagination_type=r;var a="initPagination"+r.charAt(0).toUpperCase()+r.slice(1);"function"==typeof WPUltimatePostGrid[a]&&WPUltimatePostGrid[a](i)}),WPUltimatePostGrid.restoreDeeplink()});